@using Radzen.Blazor
@inject DialogService DialogService

@* F. Lead Capture Form â€” simple email + prominent "Download Now" integrated in hero banner *@
<div class="hero-lead-form">
    <EditForm Model="@_model" OnValidSubmit="OnSubmit">
        <DataAnnotationsValidator />
        <div class="hero-lead-form-inner">
            <RadzenTextBox @bind-Value="_model.Email"
                           Placeholder="Enter your email"
                           Style="min-width: 280px; height: 56px; border-radius: 8px; font-size: 1rem;"
                           class="hero-lead-email" />
            <RadzenButton Text="Download Now"
                          Type="submit"
                          ButtonStyle="ButtonStyle.Success"
                          Variant="Variant.Flat"
                          Style="height: 56px; min-width: 180px; font-weight: 700; font-size: 1.0625rem; border-radius: 8px;"
                          class="hero-lead-cta" />
        </div>
        <ValidationSummary class="hero-lead-validation" />
    </EditForm>
</div>

@code {
    private LeadCaptureModel _model = new();

    private async Task OnSubmit()
    {
        if (string.IsNullOrWhiteSpace(_model.Email) || !_model.Email.Contains("@"))
        {
            await DialogService.Alert("Please enter a valid email address.", "Invalid Email");
            return;
        }

        // Placeholder for subscription / download logic (e.g. API call, send lead magnet)
        await DialogService.Alert($"Success! Your guide has been sent to {_model.Email}.", "Check Your Inbox");
        _model.Email = string.Empty;
    }

    private sealed class LeadCaptureModel
    {
        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "Email is required.")]
        [System.ComponentModel.DataAnnotations.EmailAddress(ErrorMessage = "Please enter a valid email.")]
        public string Email { get; set; } = "";
    }
}
